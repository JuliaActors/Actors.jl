<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>communicate with actors · Actors.jl</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img src="../../assets/logo.svg" alt="Actors.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit">Actors.jl</span></div><form class="docs-search" action="../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../">Introduction</a></li><li><input class="collapse-toggle" id="menuitem-2" type="checkbox"/><label class="tocitem" for="menuitem-2"><span class="docs-label">Tutorials</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../tutorial/install/">Install and Use <code>Actors</code></a></li><li><a class="tocitem" href="../../tutorial/intro/">Getting Started with Actors</a></li><li><a class="tocitem" href="../../tutorial/tabletennis/">Simulate a Game</a></li><li><a class="tocitem" href="../../tutorial/stack/">Implement a Stack</a></li><li><a class="tocitem" href="../../tutorial/dictsrv/">Implement a thread-safe <code>Dict</code></a></li><li><a class="tocitem" href="../../tutorial/supervise/">Supervise Actors</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3" type="checkbox" checked/><label class="tocitem" for="menuitem-3"><span class="docs-label">How to</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../spawn/"><code>spawn</code> actors</a></li><li class="is-active"><a class="tocitem" href>communicate with actors</a><ul class="internal"><li><a class="tocitem" href="#by-send"><span>by <code>send</code></span></a></li><li><a class="tocitem" href="#receive"><span><code>receive</code></span></a></li><li><a class="tocitem" href="#use-the-messaging-protocol"><span>use the messaging protocol</span></a></li><li><a class="tocitem" href="#use-the-user-API-functions"><span>use the user API functions</span></a></li><li><a class="tocitem" href="#write-your-own-actor-API"><span>write your own actor API</span></a></li><li><a class="tocitem" href="#enhance-the-messaging-protocol"><span>enhance the messaging protocol</span></a></li></ul></li><li><a class="tocitem" href="../information/">get information from actors</a></li><li><a class="tocitem" href="../share/">(not) share variables</a></li><li><a class="tocitem" href="../failure/">deal with failures</a></li><li><a class="tocitem" href="../register/"><code>register</code> actors</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-4" type="checkbox"/><label class="tocitem" for="menuitem-4"><span class="docs-label">On Actors</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../manual/basics/">Actor Model</a></li><li><a class="tocitem" href="../../manual/actors/">Actors and Julia</a></li><li><a class="tocitem" href="../../manual/behaviors/">Actor Behavior</a></li><li><a class="tocitem" href="../../manual/protocol/">Messaging Protocol</a></li><li><input class="collapse-toggle" id="menuitem-4-5" type="checkbox"/><label class="tocitem" for="menuitem-4-5"><span class="docs-label">Error Handling</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../manual/errors/">Error Handling Overview</a></li><li><a class="tocitem" href="../../manual/connections/">Connections</a></li><li><a class="tocitem" href="../../manual/monitors/">Monitors</a></li><li><a class="tocitem" href="../../manual/supervisors/">Supervisors</a></li><li><a class="tocitem" href="../../manual/node_failures/">Node Failures</a></li><li><a class="tocitem" href="../../manual/checkpoints/">Checkpointing</a></li><li><a class="tocitem" href="../../manual/fault_tolerance/">Fault Tolerance</a></li></ul></li><li><a class="tocitem" href="../../manual/infrastructure/">More Useful Stuff</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-5" type="checkbox"/><label class="tocitem" for="menuitem-5"><span class="docs-label">Reference</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><input class="collapse-toggle" id="menuitem-5-1" type="checkbox"/><label class="tocitem" for="menuitem-5-1"><span class="docs-label">API</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../api/api/"><code>Actors</code> Module</a></li><li><a class="tocitem" href="../../api/types/">Basic Types</a></li><li><a class="tocitem" href="../../api/starting/">Starting Actors, creating links</a></li><li><a class="tocitem" href="../../api/primitives/">Actor Primitives</a></li><li><a class="tocitem" href="../../api/comm/">Communication primitives</a></li><li><a class="tocitem" href="../../api/user_api/">User API</a></li><li><a class="tocitem" href="../../api/registry/">Actor Registry</a></li><li><a class="tocitem" href="../../api/connect/">Connections</a></li><li><a class="tocitem" href="../../api/monitor/">Monitors</a></li><li><a class="tocitem" href="../../api/supervision/">Supervisors</a></li><li><a class="tocitem" href="../../api/checkpointing/">Checkpointing</a></li><li><a class="tocitem" href="../../api/utils/">Utilities</a></li><li><a class="tocitem" href="../../api/diagnosis/">Diagnosis</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-5-2" type="checkbox"/><label class="tocitem" for="menuitem-5-2"><span class="docs-label">Examples</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../examples/dining_phil/">Dining Philosophers</a></li><li><a class="tocitem" href="../../examples/prod_cons/">Producer-Consumer Problem</a></li><li><a class="tocitem" href="../../examples/examples/">Further Examples</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-5-3" type="checkbox"/><label class="tocitem" for="menuitem-5-3"><span class="docs-label">Internals</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../reference/diag/">Diagnostics</a></li><li><a class="tocitem" href="../../reference/internals/">Internals</a></li><li><a class="tocitem" href="../../reference/messages/">Messages</a></li><li><a class="tocitem" href="../../reference/interface/">Interface</a></li></ul></li><li><a class="tocitem" href="../../reference/glossary/">A Glossary of Actor Terms</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">How to</a></li><li class="is-active"><a href>communicate with actors</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>communicate with actors</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/JuliaActors/Actors.jl/blob/master/docs/src/howto/communicate.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="How-to-communicate-with-actors"><a class="docs-heading-anchor" href="#How-to-communicate-with-actors">How to communicate with actors</a><a id="How-to-communicate-with-actors-1"></a><a class="docs-heading-anchor-permalink" href="#How-to-communicate-with-actors" title="Permalink"></a></h1><p>An actor dispatches an incoming message </p><ul><li>as a <em>communication</em> parameter to its behavior function or</li><li>if it is a <a href="../../api/types/#Actors.Msg"><code>Msg</code></a>, it processes it according to the <a href="../../manual/protocol/">message protocol</a>.</li></ul><p>Then it immediately proceeds to the next message if there is one or it waits for it.</p><h2 id="by-send"><a class="docs-heading-anchor" href="#by-send">by <code>send</code></a><a id="by-send-1"></a><a class="docs-heading-anchor-permalink" href="#by-send" title="Permalink"></a></h2><p>If we <a href="../../api/primitives/#ActorInterfaces.Classic.send"><code>send</code></a> an actor a message (which is not of type <code>Msg</code>), we cause it to pass it as a communication argument to its behavior:</p><pre><code class="language-julia">julia&gt; using Actors

julia&gt; import Actors: spawn, newLink

julia&gt; myactor = spawn(println, &quot;Hello &quot;)
Link{Channel{Any}}(Channel{Any}(32), 1, :default)

julia&gt; send(myactor, &quot;World!&quot;);
Hello World!</code></pre><p>Actors can send messages to other actors if they have their links:</p><pre><code class="language-julia">julia&gt; pserv = spawn(println)                    # spawn a print server
Link{Channel{Any}}(Channel{Any}(32), 1, :default)

julia&gt; become!(myactor, send, pserv, &quot;Hello &quot;);  # cause myactor to use it

julia&gt; send(myactor, &quot;Kermit!&quot;);
Hello Kermit!</code></pre><p>Actors receive messages implicitly.</p><h2 id="receive"><a class="docs-heading-anchor" href="#receive"><code>receive</code></a><a id="receive-1"></a><a class="docs-heading-anchor-permalink" href="#receive" title="Permalink"></a></h2><p>Receiving a message is a blocking operation. Since here actors are implemented as Julia <code>Task</code>s, either they are busy in processing a message or waiting for the next message to arrive. We can use <a href="../../api/comm/#Actors.receive"><code>receive</code></a> explicitly in order to communicate with actors. To do it, we </p><ol><li>use <a href="../../api/starting/#Actors.newLink"><code>newLink</code></a> to create a Link,</li><li>communicate it to an actor and</li><li>cause it to <code>send</code> something to the given link.</li><li>Then we can <code>receive</code> the actor&#39;s message.</li></ol><pre><code class="language-julia">julia&gt; me = newLink()
Link{Channel{Any}}(Channel{Any}(32), 1, :local)

julia&gt; become!(myactor, (f, args...)-&gt;send(me, f(args...)));

julia&gt; send(myactor, +, 1, 2, 3)
(+, 1, 2, 3)

julia&gt; println(&quot;now doing something else ...&quot;)
now doing something else ...

julia&gt; receive(me)
6</code></pre><p>This is <em>asynchronous bidirectional communication</em> : sender and receiver are decoupled.</p><ul><li>If we call <code>receive</code> after the message has been delivered, it will return it immediately.</li><li>If we call it before, it will wait until delivery or until it times out.</li></ul><pre><code class="language-julia">julia&gt; receive(me)
Actors.Timeout()</code></pre><p>So far we used <code>send</code> and <code>receive</code> explicitly to communicate with actors.</p><h2 id="use-the-messaging-protocol"><a class="docs-heading-anchor" href="#use-the-messaging-protocol">use the messaging protocol</a><a id="use-the-messaging-protocol-1"></a><a class="docs-heading-anchor-permalink" href="#use-the-messaging-protocol" title="Permalink"></a></h2><p>The <a href="../../manual/protocol/">messaging protocol</a> is another way to communicate with an actor. It can be used to cause an actor to do also other things e.g. giving information, executing arbitrary functions or updating parameters. You normally won&#39;t use it explicitly since we have the user API for that. But here we demonstrate briefly how to do it.</p><p>We cause our actor to assume a <code>+</code>-behavior. It will add what we send to it, but it will not send it back. Now if we send it a <a href="../../reference/messages/#Actors.Call"><code>Call</code></a> with the same information, it will send a <a href="../../api/types/#Actors.Response"><code>Response</code></a> with the result to the given link:</p><pre><code class="language-julia">julia&gt; become!(myactor, +);

julia&gt; send(myactor, Actors.Call((1,2,3), me))
Actors.Call((1, 2, 3), Link{Channel{Any}}(Channel{Any}(32), 1, :local))

julia&gt; receive(me)
Response(6, Link{Channel{Any}}(Channel{Any}(32), 1, :default))

julia&gt; ans.y
6</code></pre><p>A user or programmer can enhance the messaging protocol (see below).</p><h2 id="use-the-user-API-functions"><a class="docs-heading-anchor" href="#use-the-user-API-functions">use the user API functions</a><a id="use-the-user-API-functions-1"></a><a class="docs-heading-anchor-permalink" href="#use-the-user-API-functions" title="Permalink"></a></h2><p>The <a href="../../api/user_api/">user API</a> to the messaging protocol provides an easy way to communicate with actors.</p><p><a href="../../api/comm/#Actors.request"><code>request</code></a> is a wrapper for <em>synchronous bidirectional communication</em>. It creates a link internally and sends it with the communication parameters as a <code>Call</code> (or another given message type) to the actor. So it is a shortcut for the above explicit use:</p><pre><code class="language-julia">julia&gt; request(myactor, 1,2,3)
6</code></pre><p><a href="../../api/user_api/#Actors.call"><code>call</code></a> can do both asynchronous and synchronous (bidirectional) communication. If you give it a link, the actor will respond to that:</p><pre><code class="language-julia">julia&gt; call(myactor, me, 1, 2, 3)
Actors.Call((1, 2, 3), Link{Channel{Any}}(Channel{Any}(32), 1, :local))

julia&gt; receive(me).y
6</code></pre><p>If you don&#39;t give it a link, it will use a <code>request</code> and work synchronously:</p><pre><code class="language-julia">julia&gt; call(myactor, 1, 2, 3)
6</code></pre><p>There are more <a href="../../api/user_api/">user API</a> functions for accessing the <a href="../../manual/protocol/">messaging protocol</a>.</p><h2 id="write-your-own-actor-API"><a class="docs-heading-anchor" href="#write-your-own-actor-API">write your own actor API</a><a id="write-your-own-actor-API-1"></a><a class="docs-heading-anchor-permalink" href="#write-your-own-actor-API" title="Permalink"></a></h2><h2 id="enhance-the-messaging-protocol"><a class="docs-heading-anchor" href="#enhance-the-messaging-protocol">enhance the messaging protocol</a><a id="enhance-the-messaging-protocol-1"></a><a class="docs-heading-anchor-permalink" href="#enhance-the-messaging-protocol" title="Permalink"></a></h2></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../spawn/">« <code>spawn</code> actors</a><a class="docs-footer-nextpage" href="../information/">get information from actors »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Thursday 22 April 2021 06:22">Thursday 22 April 2021</span>. Using Julia version 1.6.0.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
