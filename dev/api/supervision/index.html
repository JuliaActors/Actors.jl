<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Supervisors · Actors.jl</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img src="../../assets/logo.svg" alt="Actors.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit">Actors.jl</span></div><form class="docs-search" action="../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../">Introduction</a></li><li><input class="collapse-toggle" id="menuitem-2" type="checkbox"/><label class="tocitem" for="menuitem-2"><span class="docs-label">Tutorials</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../tutorial/install/">Install and Use <code>Actors</code></a></li><li><a class="tocitem" href="../../tutorial/intro/">Getting Started with Actors</a></li><li><a class="tocitem" href="../../tutorial/tabletennis/">Simulate a Game</a></li><li><a class="tocitem" href="../../tutorial/stack/">Implement a Stack</a></li><li><a class="tocitem" href="../../tutorial/dictsrv/">Implement a thread-safe <code>Dict</code></a></li><li><a class="tocitem" href="../../tutorial/supervise/">Supervise Actors</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3" type="checkbox"/><label class="tocitem" for="menuitem-3"><span class="docs-label">How to</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../howto/spawn/"><code>spawn</code> actors</a></li><li><a class="tocitem" href="../../howto/communicate/">communicate with actors</a></li><li><a class="tocitem" href="../../howto/information/">get information from actors</a></li><li><a class="tocitem" href="../../howto/share/">(not) share variables</a></li><li><a class="tocitem" href="../../howto/failure/">deal with failures</a></li><li><a class="tocitem" href="../../howto/register/"><code>register</code> actors</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-4" type="checkbox"/><label class="tocitem" for="menuitem-4"><span class="docs-label">On Actors</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../manual/basics/">Actor Model</a></li><li><a class="tocitem" href="../../manual/actors/">Actors and Julia</a></li><li><a class="tocitem" href="../../manual/behaviors/">Actor Behavior</a></li><li><a class="tocitem" href="../../manual/protocol/">Messaging Protocol</a></li><li><input class="collapse-toggle" id="menuitem-4-5" type="checkbox"/><label class="tocitem" for="menuitem-4-5"><span class="docs-label">Error Handling</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../manual/errors/">Error Handling Overview</a></li><li><a class="tocitem" href="../../manual/connections/">Connections</a></li><li><a class="tocitem" href="../../manual/monitors/">Monitors</a></li><li><a class="tocitem" href="../../manual/supervisors/">Supervisors</a></li><li><a class="tocitem" href="../../manual/node_failures/">Node Failures</a></li><li><a class="tocitem" href="../../manual/checkpoints/">Checkpointing</a></li><li><a class="tocitem" href="../../manual/fault_tolerance/">Fault Tolerance</a></li></ul></li><li><a class="tocitem" href="../../manual/infrastructure/">More Useful Stuff</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-5" type="checkbox" checked/><label class="tocitem" for="menuitem-5"><span class="docs-label">Reference</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><input class="collapse-toggle" id="menuitem-5-1" type="checkbox" checked/><label class="tocitem" for="menuitem-5-1"><span class="docs-label">API</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../api/"><code>Actors</code> Module</a></li><li><a class="tocitem" href="../types/">Basic Types</a></li><li><a class="tocitem" href="../starting/">Starting Actors, creating links</a></li><li><a class="tocitem" href="../primitives/">Actor Primitives</a></li><li><a class="tocitem" href="../comm/">Communication primitives</a></li><li><a class="tocitem" href="../user_api/">User API</a></li><li><a class="tocitem" href="../registry/">Actor Registry</a></li><li><a class="tocitem" href="../connect/">Connections</a></li><li><a class="tocitem" href="../monitor/">Monitors</a></li><li class="is-active"><a class="tocitem" href>Supervisors</a><ul class="internal"><li><a class="tocitem" href="#strategies"><span>Supervision Strategies</span></a></li><li><a class="tocitem" href="#restart"><span>Child Restart Options</span></a></li><li><a class="tocitem" href="#Supervision-API"><span>Supervision API</span></a></li><li><a class="tocitem" href="#Functions"><span>Functions</span></a></li></ul></li><li><a class="tocitem" href="../checkpointing/">Checkpointing</a></li><li><a class="tocitem" href="../utils/">Utilities</a></li><li><a class="tocitem" href="../diagnosis/">Diagnosis</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-5-2" type="checkbox"/><label class="tocitem" for="menuitem-5-2"><span class="docs-label">Examples</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../examples/dining_phil/">Dining Philosophers</a></li><li><a class="tocitem" href="../../examples/prod_cons/">Producer-Consumer Problem</a></li><li><a class="tocitem" href="../../examples/examples/">Further Examples</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-5-3" type="checkbox"/><label class="tocitem" for="menuitem-5-3"><span class="docs-label">Internals</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../reference/diag/">Diagnostics</a></li><li><a class="tocitem" href="../../reference/internals/">Internals</a></li><li><a class="tocitem" href="../../reference/messages/">Messages</a></li><li><a class="tocitem" href="../../reference/interface/">Interface</a></li></ul></li><li><a class="tocitem" href="../../reference/glossary/">A Glossary of Actor Terms</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Reference</a></li><li><a class="is-disabled">API</a></li><li class="is-active"><a href>Supervisors</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Supervisors</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/JuliaActors/Actors.jl/blob/master/docs/src/api/supervision.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Supervisors"><a class="docs-heading-anchor" href="#Supervisors">Supervisors</a><a id="Supervisors-1"></a><a class="docs-heading-anchor-permalink" href="#Supervisors" title="Permalink"></a></h1><p>Supervisors allow some automation and control of error handling in an actor system. A supervisor actor can restart its children if they should terminate.</p><h2 id="strategies"><a class="docs-heading-anchor" href="#strategies">Supervision Strategies</a><a id="strategies-1"></a><a class="docs-heading-anchor-permalink" href="#strategies" title="Permalink"></a></h2><p>What a <a href="#Actors.supervisor"><code>supervisor</code></a> does if one of its children terminates, is determined by its supervision <code>strategy</code> argument:</p><table><tr><th style="text-align: left">strategy</th><th style="text-align: left">brief description</th></tr><tr><td style="text-align: left"><code>:one_for_one</code></td><td style="text-align: left">only the terminated actor is restarted (default strategy),</td></tr><tr><td style="text-align: left"><code>:one_for_all</code></td><td style="text-align: left">all other child actors are shutdown, then all child actors are restarted,</td></tr><tr><td style="text-align: left"><code>:rest_for_one</code></td><td style="text-align: left">actors registered to the supervisor after the terminated one are shutdown, then the terminated one and the rest are restarted.</td></tr></table><h2 id="restart"><a class="docs-heading-anchor" href="#restart">Child Restart Options</a><a id="restart-1"></a><a class="docs-heading-anchor-permalink" href="#restart" title="Permalink"></a></h2><p>Child <code>restart</code> options with <a href="#Actors.supervise"><code>supervise</code></a> allow for yet finer child-specific control of restarting:</p><table><tr><th style="text-align: left">restart option</th><th style="text-align: left">brief description</th></tr><tr><td style="text-align: left"><code>:permanent</code></td><td style="text-align: left">the child actor is always restarted,</td></tr><tr><td style="text-align: left"><code>:temporary</code></td><td style="text-align: left">the child is never restarted, regardless of the supervision strategy,</td></tr><tr><td style="text-align: left"><code>:transient</code></td><td style="text-align: left">the child is restarted only if it terminates abnormally, i.e., with an exit reason other than <code>:normal</code> or <code>:shutdown</code>.</td></tr></table><h2 id="Supervision-API"><a class="docs-heading-anchor" href="#Supervision-API">Supervision API</a><a id="Supervision-API-1"></a><a class="docs-heading-anchor-permalink" href="#Supervision-API" title="Permalink"></a></h2><p>Supervisors have the following API:</p><table><tr><th style="text-align: left">API function</th><th style="text-align: left">brief description</th></tr><tr><td style="text-align: left"><a href="#Actors.supervisor"><code>supervisor</code></a></td><td style="text-align: left">start a supervisor actor,</td></tr><tr><td style="text-align: left"><a href="#Actors.supervise"><code>supervise</code></a></td><td style="text-align: left">add an actor to a supervisor&#39;s child list,</td></tr><tr><td style="text-align: left"><a href="#Actors.unsupervise"><code>unsupervise</code></a></td><td style="text-align: left">delete an actor or task from a supervisor&#39;s child list,</td></tr><tr><td style="text-align: left"><a href="#Actors.start_actor"><code>start_actor</code></a></td><td style="text-align: left">start an actor as a child,</td></tr><tr><td style="text-align: left"><a href="#Actors.start_task"><code>start_task</code></a></td><td style="text-align: left">start a task as a child,</td></tr><tr><td style="text-align: left"><a href="#Actors.terminate_child"><code>terminate_child</code></a></td><td style="text-align: left">terminate a child and to remove it from its child list,</td></tr><tr><td style="text-align: left"><a href="#Actors.set_strategy"><code>set_strategy</code></a></td><td style="text-align: left">change the supervision strategy,</td></tr><tr><td style="text-align: left"><a href="#Actors.count_children"><code>count_children</code></a></td><td style="text-align: left">return a children count,</td></tr><tr><td style="text-align: left"><a href="#Actors.which_children"><code>which_children</code></a></td><td style="text-align: left">return a list of all children.</td></tr></table><h2 id="Functions"><a class="docs-heading-anchor" href="#Functions">Functions</a><a id="Functions-1"></a><a class="docs-heading-anchor-permalink" href="#Functions" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="Actors.supervisor" href="#Actors.supervisor"><code>Actors.supervisor</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">supervisor( strategy=:one_for_one, 
            max_restarts::Int=3, 
            max_seconds::Real=5; 
            name=nothing, kwargs...)</code></pre><p>Spawn a supervisor actor with an empty child list and return a link to it.</p><p><strong>Arguments</strong></p><p>The following arguments are mandatory and go into a supervisor&#39;s  options:</p><ul><li><code>strategy=:one_for_one</code>: <a href="#strategies">supervision strategy</a>, can be    either <code>:one_for_one</code>, <code>:one_for_all</code> or <code>:rest_for_one</code>,</li><li><code>max_restarts::Int=3</code>: maximum number of restarts    allowed in a time frame,</li><li><code>max_seconds::Real=5</code>: time frame in which    <code>max_restarts</code> applies,</li></ul><p><strong>Keyword arguments and further options</strong></p><ul><li><code>name=nothing</code>: name (Symbol) under which a supervisor should   be registered, if <code>nothing</code> it doesn&#39;t get registered,</li><li><code>kwargs...</code>: further keyword arguments to the    <a href="../../reference/internals/#Actors.Supervisor"><code>Supervisor</code></a> and to <a href="../starting/#ActorInterfaces.Classic.spawn"><code>spawn</code></a>. Keyword arguments    not taken by <code>spawn</code> are supervisor options, used to extend a    supervisor&#39;s functionality.</li></ul><p><strong>Reserved options</strong></p><ul><li><code>strategy</code>, <code>max_restarts</code>, <code>max_seconds</code>, <code>name</code> are reserved,    see above,</li><li><code>spares=[5,6,7]</code>: spare <code>pid</code>s, where you can give spare pids    (e.g. <code>[5,6,7]</code>) to a supervisor used for actor restarts after    node failures.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaActors/Actors.jl/blob/9105b315ab653594fb5f06ae581fda7a5deb70c2/src/supervisor.jl#L191-L225">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Actors.supervise" href="#Actors.supervise"><code>Actors.supervise</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">supervise(sv, child=self(); cb=nothing, restart::Symbol=:transient)</code></pre><p>Tell a supervisor <code>sv</code> to supervise the given <code>child</code> actor.</p><p><strong>Arguments</strong></p><ul><li><code>sv</code>: link or registered name of a supervisor,</li><li><code>child</code>: link or registered name of an actor to supervise.</li></ul><p><strong>Keyword Arguments</strong></p><ul><li><code>cb=nothing</code>: callback (a callable object), takes the    previous actor behavior as argument and must return    a <a href="../types/#Actors.Link"><code>Link</code></a> to a new actor; if <code>nothing</code>, the   actor gets restarted with its <a href="../user_api/#Actors.init!"><code>init!</code></a> callback    or its previous behavior. </li><li><code>restart::Symbol=:transient</code>: <a href="#restart">restart option</a>, one of    <code>:permanent</code>, <code>:temporary</code>, <code>:transient</code>,</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaActors/Actors.jl/blob/9105b315ab653594fb5f06ae581fda7a5deb70c2/src/supervisor.jl#L352-L370">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Actors.unsupervise" href="#Actors.unsupervise"><code>Actors.unsupervise</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">unsupervise(sv, lst=self())</code></pre><p>Tell a supervisor <code>sv</code> to delete <code>ls</code> from its childs list. </p><p><strong>Arguments</strong></p><ul><li><code>sv</code>: link or registered name of a supervisor,</li><li><code>lst</code>: link, registered name of an actor or task.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaActors/Actors.jl/blob/9105b315ab653594fb5f06ae581fda7a5deb70c2/src/supervisor.jl#L382-L390">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Actors.set_strategy" href="#Actors.set_strategy"><code>Actors.set_strategy</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">set_strategy(sv, strategy::Symbol)</code></pre><p>Tell a supervisor <code>sv</code> to change its restart <code>strategy</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaActors/Actors.jl/blob/9105b315ab653594fb5f06ae581fda7a5deb70c2/src/supervisor.jl#L393-L397">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Actors.start_actor" href="#Actors.start_actor"><code>Actors.start_actor</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">start_actor(start, sv, cb=nothing, restart::Symbol=:transient; 
            name::Union{Symbol,Nothing}=nothing, kwargs...)</code></pre><p>Tell a supervisor <code>sv</code> to start an actor, to add  it to its childs list and to return a link to it.</p><p><strong>Arguments</strong></p><ul><li><code>start</code>: start behavior of the child, a callable object,</li><li><code>sv::Link</code>: link to a started supervisor,</li><li><code>cb=nothing</code>: callback (a callable object, gets the last   actor behavior as argument and must return a <a href="../types/#Actors.Link"><code>Link</code></a>);     if <code>nothing</code>, the actor gets restarted with its <a href="../user_api/#Actors.init!"><code>init!</code></a>    callback or with its last behavior,</li><li><code>restart::Symbol=:transient</code>: <a href="#restart">restart option</a>, one of    <code>:permanent</code>, <code>:temporary</code>, <code>:transient</code>,</li><li><code>name::Union{Symbol,Nothing}=nothing</code>, name (Symbol) under which   the actor should be registered,</li><li><code>kwargs...</code>: keyword arguments to <a href="../starting/#ActorInterfaces.Classic.spawn"><code>spawn</code></a>.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaActors/Actors.jl/blob/9105b315ab653594fb5f06ae581fda7a5deb70c2/src/supervisor.jl#L253-L273">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Actors.start_task" href="#Actors.start_task"><code>Actors.start_task</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">start_task(start, sv, cb=nothing; 
           timeout::Real=5.0, pollint::Real=0.1)</code></pre><p>Spawn a task with a <code>start</code> behavior and tell the supervisor <code>sv</code> to supervise it (with restart strategy <code>:transient</code>) and return a reference to it.</p><p><strong>Parameters</strong></p><ul><li><code>start</code>: must be a callable object (with no arguments),</li><li><code>sv</code>: link or registered name of a supervisor,</li><li><code>cb=nothing</code>: callback for restart (a callable object, must    return a <code>Task</code>); if <code>cb=nothing</code>, the task gets restarted    with its <code>start</code> function,</li><li><code>timeout::Real=5.0</code>: how long [seconds] should the task    be supervised, </li><li><code>pollint::Real=0.1</code>: polling interval [seconds].</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaActors/Actors.jl/blob/9105b315ab653594fb5f06ae581fda7a5deb70c2/src/supervisor.jl#L292-L309">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Actors.count_children" href="#Actors.count_children"><code>Actors.count_children</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">count_children(sv)</code></pre><p>Return a named tuple containing children counts for the given supervisor <code>sv</code> (link or registered name).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaActors/Actors.jl/blob/9105b315ab653594fb5f06ae581fda7a5deb70c2/src/supervisor.jl#L235-L240">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Actors.which_children" href="#Actors.which_children"><code>Actors.which_children</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">which_children(sv, info=false)</code></pre><p>Tell a supervisor <code>sv</code> to return its childs list. </p><p><strong>Arguments</strong></p><ul><li><code>sv</code>: link or registered name of a supervisor,</li><li><code>info=false</code>: If <code>info=true</code>, return a list of named tuples    with child information.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaActors/Actors.jl/blob/9105b315ab653594fb5f06ae581fda7a5deb70c2/src/supervisor.jl#L329-L338">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Actors.terminate_child" href="#Actors.terminate_child"><code>Actors.terminate_child</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">terminate_child(sv, ls)</code></pre><p>Tell a supervisor <code>sv</code> to remove a child <code>ls</code> from its  childs list and to terminate it with reason <code>:shutdown</code>.</p><p><strong>Arguments</strong></p><ul><li><code>sv</code>: link or registered name of a supervisor,</li><li><code>ls</code>: link or registered name of a child.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaActors/Actors.jl/blob/9105b315ab653594fb5f06ae581fda7a5deb70c2/src/supervisor.jl#L317-L326">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../monitor/">« Monitors</a><a class="docs-footer-nextpage" href="../checkpointing/">Checkpointing »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Tuesday 20 April 2021 17:05">Tuesday 20 April 2021</span>. Using Julia version 1.6.0.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
